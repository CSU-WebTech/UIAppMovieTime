@page "/searchmovie"
@using MovieTime.Models;
@using MovieTime.Clients;
@inject SearchMovieClient SearchMovieClient;
@using MovieTime.Shared.Components;

<div id="content">
    <div class="container p-5"> 
        <PageTitle>Search Movie</PageTitle>
    </div>
</div>

<h1>Find Perfect Show or Movie for Evening....</h1>
<label for="id">Movie Title:</label>
<input type="text" id="id" name="id" @bind="Addtitle">
<button @onclick= "title">Search</button>
<button @onclick= "OnInitializeAsync">Reset</button>



@foreach(var t in response.Search){

     <div>
            <p>Title: @t.Title</p>
            <p>Release Year: @t.Year </p>
            <p>Type: @t.Type</p>
            <img src="@t.Poster"  />     
    </div>
}

@code {
     private SearchMovieResponse? searchMovieResponse = null;
     public SearchMovieResponse response = null;
     protected override async Task OnInitializedAsync(){
        searchMovieResponse= await SearchMovieClient.GetMovie(null);
        response=searchMovieResponse;
     } 
      protected  async Task OnInitializeAsync(){
        Addtitle = null;
        searchMovieResponse= await SearchMovieClient.GetMovie(null);
        
        response=searchMovieResponse;
     }

private string? Addtitle;
async Task title(){
    if(!string.IsNullOrWhiteSpace(Addtitle)){
        searchMovieResponse= await SearchMovieClient.GetMovie(Addtitle);
        response=searchMovieResponse;
    }
}

}




